(function(c,i,s,h,a,e,r,u){"use strict";const B=function(t){const o=JSON.parse(JSON.stringify(t));for(const n in o.author)switch(n){case"email":case"phone":case"mfaEnabled":case"hasBouncedEmail":delete o.author[n]}return o},{Button:l}=a.findByProps("Button","Stack"),{ScrollView:w}=e.ReactNative;function P({message:t}){const o=e.React.useMemo(function(){return JSON.stringify(B(t),null,4)},[t.id]),n={margin:8};return e.React.createElement(e.React.Fragment,null,e.React.createElement(w,{style:{flex:1}},e.React.createElement(l,{text:"Copy Raw Content",style:n,variant:"secondary",disabled:!t.content,onPress:function(){e.clipboard.setString(t.content),r.showToast("Copied content to clipboard",s.getAssetIDByName("toast_copy_link"))}}),e.React.createElement(l,{text:"Copy Raw Data",style:n,variant:"secondary",onPress:function(){e.clipboard.setString(o),r.showToast("Copied data to clipboard",s.getAssetIDByName("toast_copy_link"))}}),t.content&&e.React.createElement(u.Codeblock,{selectable:!0,style:n},t.content),e.React.createElement(u.Codeblock,{selectable:!0,style:n},o)))}const d=a.findByProps("openLazy","hideActionSheet"),{ActionSheetRow:f}=a.findByProps("ActionSheetRow"),p=a.findByProps("push","pushLazy","pop"),v=a.findByProps("getRenderCloseButton")?.getRenderCloseButton??a.findByProps("getHeaderCloseButton")?.getHeaderCloseButton,S=a.findByName("Navigator")??a.findByProps("Navigator")?.Navigator,E=i.before("openLazy",d,function([t,o,n]){const y=n?.message;o!=="MessageLongPressActionSheet"||!y||t.then(function(b){const C=i.after("default",b,function(L,A){e.React.useEffect(function(){return function(){C()}},[]);const R=h.findInReactTree(A,function(I){return I?.some?.(function(g){return g?.type?.name==="ButtonRow"||g?.type?.name==="ActionSheetRow"})});if(!R)return;const k=function(){return e.React.createElement(S,{initialRouteName:"RawPage",goBackOnBackPress:!0,screens:{RawPage:{title:"ViewRaw",headerLeft:v?.(function(){return p.pop()}),render:function(){return e.React.createElement(P,{message:y})}}}})};R.push(e.React.createElement(f,{label:"View Raw",icon:e.React.createElement(f.Icon,{source:s.getAssetIDByName("ChatIcon")}),onPress:function(){d.hideActionSheet(),p.push(k)}}))})})}),N=function(){return E()};return c.onUnload=N,c})({},vendetta.patcher,vendetta.ui.assets,vendetta.utils,vendetta.metro,vendetta.metro.common,vendetta.ui.toasts,vendetta.ui.components);
